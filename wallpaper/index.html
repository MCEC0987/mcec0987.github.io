<!DOCTYPE html>
<html lang="zh-CN" class="mdui-theme-auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡ç”»å»Š</title>
    <!-- MDUI 1.0.2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/css/mdui.min.css">
    <!-- å­—ä½“å›¾æ ‡ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gutter: 8px;
            --sidebar-width: 280px;
        }
        
        /* ä¾§è¾¹æ é¡¶éƒ¨å›¾ç‰‡æ ·å¼ */
        .sidebar-header {
            position: relative;
            height: 150px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .sidebar-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.8);
        }
        
        .sidebar-header-text {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 16px;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            color: white;
        }
        
        .sidebar-header-text h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .sidebar-header-text p {
            margin: 4px 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .gallery-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 8px 20px;
            transition: all 0.3s ease;
        }
        
        /* æœç´¢æ æ ·å¼ */
        .search-container {
            margin: 20px 0 30px;
            padding: 20px;
            background-color: rgba(0,0,0,0.02);
            border-radius: 8px;
        }
        
        .mdui-theme-dark .search-container {
            background-color: rgba(255,255,255,0.05);
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        /* å›¾ç‰‡ç½‘æ ¼å¸ƒå±€ */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .single-column {
            grid-template-columns: repeat(1, 1fr);
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* å›¾ç‰‡å¡ç‰‡æ ·å¼ */
        .image-card {
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            height: 100%;
            background-color: #fff;
        }
        
        .mdui-theme-dark .image-card {
            background-color: #2d2d2d;
        }
        
        .image-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        
        .mdui-theme-dark .image-card:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }
        
        .image-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-top: 75%;
            overflow: hidden;
        }
        
        .image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .image-card:hover .image-container img {
            transform: scale(1.05);
        }
        
        .image-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .image-card:hover .image-actions {
            opacity: 1;
        }
        
        .image-caption {
            padding: 16px;
        }
        
        .image-caption h3 {
            margin: 0 0 8px 0;
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .image-caption p {
            margin: 0;
            color: rgba(0, 0, 0, 0.6);
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .mdui-theme-dark .image-caption p {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .image-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
        }
        
        .image-tag {
            background-color: rgba(33, 150, 243, 0.1);
            color: #2196f3;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .mdui-theme-dark .image-tag {
            background-color: rgba(33, 150, 243, 0.2);
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-image-container {
            text-align: center;
            padding: 10px;
        }
        
        .modal-image-container img {
            max-width: 100%;
            max-height: 60vh;
            border-radius: 8px;
        }
        
        .modal-image-info {
            padding: 16px 24px;
        }
        
        /* è®¾ç½®å¼¹çª—æ ·å¼ */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }
        
        .theme-color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: border-color 0.3s;
        }
        
        .theme-color-option.selected {
            border-color: #000;
        }
        
        .mdui-theme-dark .theme-color-option.selected {
            border-color: #fff;
        }
        
        /* æ”¶è—å¼¹çª—æ ·å¼ */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .favorite-item {
            position: relative;
            border-radius: 6px;
            overflow: hidden;
            cursor: pointer;
            height: 120px;
        }
        
        .favorite-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .favorite-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(255, 0, 0, 0.8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .favorite-item:hover .favorite-remove {
            opacity: 1;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader {
            display: none;
            text-align: center;
            padding: 30px;
            grid-column: 1 / -1;
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            grid-column: 1 / -1;
            color: rgba(0,0,0,0.5);
        }
        
        .mdui-theme-dark .empty-state {
            color: rgba(255,255,255,0.5);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        /* åº•éƒ¨ä¿¡æ¯ */
        .footer-info {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            color: rgba(0, 0, 0, 0.6);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .mdui-theme-dark .footer-info {
            color: rgba(255, 255, 255, 0.7);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 600px) {
            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .sidebar-header {
                height: 120px;
            }
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* ç»Ÿè®¡å¯¹è¯æ¡†æ ·å¼ */
        .stats-dialog-content {
            padding: 20px;
        }
        
        .stats-item {
            margin-bottom: 20px;
        }
        
        .stats-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--mdui-color-primary);
            text-align: center;
        }
        
        .stats-label {
            text-align: center;
            color: var(--mdui-color-text-secondary);
            margin-top: 5px;
        }
        
        .stats-icon {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 10px;
            opacity: 0.8;
        }
    </style>
</head>
<body class="mdui-appbar-with-toolbar">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="mdui-appbar mdui-appbar-fixed">
        <div class="mdui-toolbar mdui-color-theme">
            <button class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: '#main-drawer', swipe: true}">
                <i class="mdui-icon material-icons">menu</i>
            </button>
            <span class="mdui-typo-headline">é²¸é±¼å£çº¸</span>
            <div class="mdui-toolbar-spacer"></div>
            
            <!-- æœç´¢æ¡† -->
            <div class="mdui-textfield mdui-textfield-expandable mdui-float-right" style="max-width: 300px;">
                <button class="mdui-textfield-icon mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></button>
                <input id="search-input" class="mdui-textfield-input" type="text" placeholder="æœç´¢å›¾ç‰‡åç§°æˆ–æ ‡ç­¾..."/>
                <button class="mdui-textfield-close mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">close</i></button>
            </div>
            
            <!-- é¡¶æ å³ä¾§èœå• -->
            <button class="mdui-btn mdui-btn-icon mdui-ripple" mdui-menu="{target: '#topbar-menu', position: 'bottom', align: 'right'}">
                <i class="mdui-icon material-icons">more_vert</i>
            </button>
            
            <ul class="mdui-menu" id="topbar-menu">
                <li class="mdui-menu-item">
                    <a href="javascript:void(0)" class="mdui-ripple" id="refresh-gallery">
                        <i class="mdui-menu-item-icon mdui-icon material-icons">refresh</i>åˆ·æ–°å›¾åº“
                    </a>
                </li>
                <li class="mdui-menu-item">
                    <a href="javascript:void(0)" class="mdui-ripple" id="refresh-page">
                        <i class="mdui-menu-item-icon mdui-icon material-icons">cached</i>åˆ·æ–°é¡µé¢
                    </a>
                </li>
                <li class="mdui-divider"></li>
                <li class="mdui-menu-item">
                    <a href="javascript:void(0)" class="mdui-ripple" id="view-stats">
                        <i class="mdui-menu-item-icon mdui-icon material-icons mdui-text-color-theme">bar_chart</i>æŸ¥çœ‹ç»Ÿè®¡
                    </a>
                </li>
            </ul>
        </div>
    </header>

    <!-- å·¦ä¾§æŠ½å±‰ -->
    <div class="mdui-drawer mdui-drawer-close" id="main-drawer">
        <!-- ä¾§è¾¹æ é¡¶éƒ¨å›¾ç‰‡ -->
        <div class="sidebar-header">
        <img src="ä¾§è¾¹æ é¡¶éƒ¨å›¾.jpeg"/> <!-- ä¸ç¡®å®šæ˜¯ä¸æ˜¯æ”¾è¿™ï¼Œä½†èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œå…ˆæ”¾è¿™å§ğŸ¤“ -->
            <div class="sidebar-header-text">
                <h3>é²¸é±¼å£çº¸</h3>
                <p>ç²¾é€‰å£çº¸</p>
            </div>
        </div>
        
        <p class="mdui-divider"></p> <!-- æ¨ªçº¿-å¯åˆ  -->
                                
        <ul class="mdui-list">
            <!-- åˆ†ç±»ç­›é€‰ -->
            <li class="mdui-list-item mdui-ripple" id="category-filter-btn">
                <i class="mdui-list-item-icon mdui-icon material-icons">filter_list</i>
                <div class="mdui-list-item-content">åˆ†ç±»ç­›é€‰</div>
            </li>
            
            <!-- ä¸Šä¼ å›¾ç‰‡ -->
            <li class="mdui-list-item mdui-ripple" id="upload-btn">
                <i class="mdui-list-item-icon mdui-icon material-icons">cloud_upload</i>
                <div class="mdui-list-item-content">ä¸Šä¼ å›¾ç‰‡</div>
            </li>
            
            <!-- æˆ‘çš„æ”¶è— -->
            <li class="mdui-list-item mdui-ripple" id="favorites-btn">
                <i class="mdui-list-item-icon mdui-icon material-icons">favorite</i>
                <div class="mdui-list-item-content">æˆ‘çš„æ”¶è—</div>
                <span class="mdui-badge" id="favorite-count">0</span>
            </li>
            
            <li class="mdui-divider"></li>
            
            <!-- è®¾ç½® -->
            <li class="mdui-list-item mdui-ripple" id="settings-btn">
                <i class="mdui-list-item-icon mdui-icon material-icons">settings</i>
                <div class="mdui-list-item-content">è®¾ç½®</div>
            </li>
            
            <!-- å…³äº -->
            <li class="mdui-list-item mdui-ripple" id="about-btn">
                <i class="mdui-list-item-icon mdui-icon material-icons">info</i>
                <div class="mdui-list-item-content">å…³äº</div>
            </li>
        </ul>
        
        <p class="mdui-divider"></p> <!-- æ¨ªçº¿-å¯åˆ  -->
        
        <!-- ä¾§è¾¹æ åº•éƒ¨ä¿¡æ¯ -->
        <div class="mdui-container mdui-m-t-3 mdui-p-b-3">
            <div class="mdui-text-center">
                <p class="mdui-text-color-theme-secondary" style="font-size: 0.8rem;">ç‰ˆæœ¬ 2.0.0</p>
                <p class="mdui-text-color-theme-secondary" style="font-size: 0.8rem;">Â© 2025 Whale wallpaper</p>
            </div>
        </div>
        <p class="mdui-divider"></p> <!-- æ¨ªçº¿-å¯åˆ  -->
        <br> <!--â†“QQç¾¤ -->
        <a href="https://qun.qq.com/universal-share/share?ac=1&authKey=jbpEbWTnbdLY3N6dkj6eKSra0z1pn3qqY%2B8kjV8E3RWkpRPheGewbp%2Fhv4hUxmnz&busi_data=eyJncm91cENvZGUiOiIxMDE2Mjk4NjAxIiwidG9rZW4iOiJDTVNhbVVadHR5MjB6cHlyK1VudlRNUDVCMVQyUytkQzRFUy9hV1Z2Um05QXBodk9xUEtpd0hXYnFocDRvK2ZrIiwidWluIjoiMzQ3MzkzNzgyNiJ9&data=l2o8CfwghD_2-n5V14ke2Tc2roKmIJzSiCbto3fi1Suu4-rGCcQfqb7zV5qxurouDscBbsa1ysRBwjqx1zhmSQ&svctype=4&tempid=h5_group_info">ç‚¹å‡»é“¾æ¥åŠ å…¥ç¾¤èŠã€è´åˆ©äºšå®¶æ—ğŸ˜ˆã€‘</a>
    </div>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="mdui-container">
        <div class="gallery-container">
            <!-- æœç´¢æ  -->
            <div class="search-container">
                <div class="search-box">
                    <div class="mdui-textfield mdui-textfield-floating-label mdui-textfield-has-bottom" style="flex-grow: 1;">
                        <label class="mdui-textfield-label">æœç´¢å›¾ç‰‡åç§°æˆ–æ ‡ç­¾</label>
                        <input class="mdui-textfield-input" type="text" id="main-search"/>
                        <div class="mdui-textfield-bottom"></div>
                    </div>
                    <button class="mdui-btn mdui-btn-icon mdui-color-theme mdui-ripple" id="search-button">
                        <i class="mdui-icon material-icons">search</i>
                    </button>
                    <button class="mdui-btn mdui-btn-icon mdui-ripple" id="clear-search">
                        <i class="mdui-icon material-icons">clear</i>
                    </button>
                </div>
                <div class="mdui-typo-caption mdui-m-t-1" id="search-status">
                    å…± <span id="total-images">0</span> å¼ å›¾ç‰‡
                </div>
            </div>

            <!-- å›¾ç‰‡ç½‘æ ¼ -->
            <div class="gallery-grid" id="image-grid">
                <!-- å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>

            <!-- åŠ è½½åŠ¨ç”» -->
            <div class="loader" id="loader">
                <div class="mdui-spinner mdui-spinner-colorful"></div>
                <p class="mdui-m-t-2">æ­£åœ¨åŠ è½½æ›´å¤šå›¾ç‰‡...</p>
            </div>
            
            <!-- ç©ºçŠ¶æ€ -->
            <div class="empty-state" id="empty-state" style="display: none;">
                <i class="mdui-icon material-icons">photo_library</i>
                <h3>æš‚æ— å›¾ç‰‡</h3>
                <p>å½“å‰ç­›é€‰æ¡ä»¶ä¸‹æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å›¾ç‰‡</p>
            </div>
        </div>
    </div>

    <!-- åˆ†ç±»ç­›é€‰æ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="category-dialog">
        <div class="mdui-dialog-title">é€‰æ‹©åˆ†ç±»</div>
        <div class="mdui-dialog-content">
            <div class="mdui-list" id="category-list">
                <!-- åˆ†ç±»é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple" id="clear-category">æ¸…é™¤ç­›é€‰</button>
            <button class="mdui-btn mdui-color-theme mdui-ripple" mdui-dialog-close>ç¡®å®š</button>
        </div>
    </div>

    <!-- ä¸Šä¼ å›¾ç‰‡æ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="upload-dialog">
        <div class="mdui-dialog-title">ä¸Šä¼ å›¾ç‰‡</div>
        <div class="mdui-dialog-content">
            <div class="mdui-typo" style="text-align: center; padding: 40px 20px;">
                <i class="mdui-icon material-icons mdui-text-color-theme" style="font-size: 4rem;">cloud_upload</i>
                <h3>è”ç³»æˆ‘ä¸Šä¼ å›¾ç‰‡</h3>
                <p>å¦‚æœæ‚¨æœ‰é«˜è´¨é‡çš„å›¾ç‰‡æƒ³è¦åˆ†äº«åˆ°å›¾åº“ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼š</p>
                <p><strong>[æ¨è] é‚®ç®±ï¼šli331066@163.com</strong></p>
                <p><strong>é‚®ç®±ï¼šMC_EC_0987@outlook.com</strong></p>
                <p><strong>QQï¼š3473937826</strong></p>
                <p class="mdui-typo-caption mdui-text-color-theme-secondary">è¯·æä¾›å›¾ç‰‡URLã€æ ‡é¢˜ã€æè¿°å’Œåˆ†ç±»ä¿¡æ¯</p>
                <p class="mdui-typo-caption mdui-text-color-theme-secondary">æˆ–æä¾›åŸå›¾ï¼Œé™åˆ¶10MBã€æ— æ°´å°</p>
            </div>
        </div>
        <div class="mdui-dialog-actions">
<!-- æµ®åŠ¨æ ·å¼ -->
<button class="mdui-btn mdui-btn-raised mdui-color-theme" disabled>
  <i class="mdui-icon material-icons">cloud_upload</i> ä¸Šä¼ æ–‡ä»¶
</button>
            <button class="mdui-btn mdui-color-theme mdui-ripple" mdui-dialog-close>å…³é—­</button>
        </div>
    </div>

    <!-- æˆ‘çš„æ”¶è—æ¨¡æ€æ¡† -->
    <div class="mdui-dialog mdui-dialog-fullscreen" id="favorites-dialog">
        <div class="mdui-dialog-title">æˆ‘çš„æ”¶è—</div>
        <div class="mdui-dialog-content">
            <div class="favorites-grid" id="favorites-grid">
                <!-- æ”¶è—çš„å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
            <div class="empty-state" id="favorites-empty" style="display: none;">
                <i class="mdui-icon material-icons">favorite_border</i>
                <h3>æš‚æ— æ”¶è—</h3>
                <p>æ‚¨è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•å›¾ç‰‡</p>
            </div>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-color-theme mdui-ripple" mdui-dialog-close>å…³é—­</button>
        </div>
    </div>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="settings-dialog">
        <div class="mdui-dialog-title">è®¾ç½®</div>
        <div class="mdui-dialog-content">
            <div class="settings-grid">
            
            <p>bugå¤šï¼Œæ‡’å¾—åŠ¨äº†ğŸ˜”</p>
            
                <!-- ä¸»é¢˜é¢œè‰²é€‰æ‹© -->
                <div class="mdui-col-xs-12">
                    <h4>ä¸»é¢˜é¢œè‰²</h4>
                    <div class="mdui-row-xs-3">
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-blue selected" data-color="blue" title="è“è‰²ä¸»é¢˜"></div>
                        </div>
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-red" data-color="red" title="çº¢è‰²ä¸»é¢˜"></div>
                        </div>
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-green" data-color="green" title="ç»¿è‰²ä¸»é¢˜"></div>
                        </div>
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-purple" data-color="purple" title="ç´«è‰²ä¸»é¢˜"></div>
                        </div>
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-orange" data-color="orange" title="æ©™è‰²ä¸»é¢˜"></div>
                        </div>
                        <div class="mdui-col">
                            <div class="theme-color-option mdui-color-indigo" data-color="indigo" title="é›è“è‰²ä¸»é¢˜"></div>
                        </div>
                    </div>
                </div>
                
                <!-- å¸ƒå±€è®¾ç½® -->
                <div class="mdui-col-xs-12">
                    <h4>å›¾ç‰‡å¸ƒå±€</h4>
                    <div class="mdui-row-xs-2">
                        <div class="mdui-col">
                            <label class="mdui-radio">
                                <input type="radio" name="layout" value="multi" checked/>
                                <i class="mdui-radio-icon"></i>
                                å¤šåˆ—å¸ƒå±€
                            </label>
                        </div>
                        <div class="mdui-col">
                            <label class="mdui-radio">
                                <input type="radio" name="layout" value="single"/>
                                <i class="mdui-radio-icon"></i>
                                å•åˆ—å¸ƒå±€
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- æš—è‰²æ¨¡å¼ -->
                <div class="mdui-col-xs-12">
                    <h4>ä¸»é¢˜æ¨¡å¼</h4>
                    <div class="mdui-row-xs-3">
                        <div class="mdui-col">
                            <label class="mdui-radio">
                                <input type="radio" name="theme" value="light"/>
                                <i class="mdui-radio-icon"></i>
                                äº®è‰²æ¨¡å¼
                            </label>
                        </div>
                        <div class="mdui-col">
                            <label class="mdui-radio">
                                <input type="radio" name="theme" value="dark"/>
                                <i class="mdui-radio-icon"></i>
                                æš—è‰²æ¨¡å¼
                            </label>
                        </div>
                        <div class="mdui-col">
                            <label class="mdui-radio">
                                <input type="radio" name="theme" value="auto" checked/>
                                <i class="mdui-radio-icon"></i>
                                è‡ªåŠ¨æ¨¡å¼
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple" id="reset-settings">æ¢å¤é»˜è®¤</button>
            <button class="mdui-btn mdui-color-theme mdui-ripple" id="save-settings">ä¿å­˜è®¾ç½®</button>
        </div>
    </div>

    <!-- å…³äºæ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="about-dialog">
        <div class="mdui-dialog-title">å…³äº</div>
        <div class="mdui-dialog-content">
            <div class="mdui-typo" style="text-align: center; padding: 20px;">
                <i class="mdui-icon material-icons mdui-text-color-theme" style="font-size: 4rem;">photo_library</i>
                <h3>é²¸é±¼å£çº¸ 2.0</h3>
                <p>ä¸€ä¸ªåŸºäº MDUI æ¡†æ¶æ„å»ºçš„å£çº¸ç½‘ç«™</p>
                
                <div class="mdui-row mdui-m-t-3">
                    <div class="mdui-col-xs-6">
                        <h5>åŠŸèƒ½ç‰¹æ€§</h5>
                        <ul class="mdui-list">
                     <!--  <li class="mdui-list-item">å“åº”å¼è®¾è®¡</li> -->
                            <li class="mdui-list-item">åˆ†ç±»ç­›é€‰</li>
                            <li class="mdui-list-item">æœç´¢åŠŸèƒ½</li>
                            <li class="mdui-list-item">æ”¶è—ç®¡ç†</li>
                        </ul>
                    </div>
                    <div class="mdui-col-xs-6">
                        <h5>æŠ€æœ¯æ ˆ</h5>
                        <ul class="mdui-list">
                            <li class="mdui-list-item">MDUI 1.0.2</li>
                            <li class="mdui-list-item">HTML5 & CSS3</li>
                            <li class="mdui-list-item">JavaScript ES6</li>
                            <li class="mdui-list-item">LocalStorage API</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mdui-m-t-3">
                    <p class="mdui-text-color-theme-secondary">Â© 2025 Whale wallpaper</p>
                    <p class="mdui-typo-caption">å¦‚æœ‰ä¾µæƒè¯·è”ç³»æˆ‘ä»¬åˆ é™¤</p>
                </div>
            </div>
                            <h3>å¸®åŠ©</h3>
                            <p>1.æ€ä¹ˆä¸‹è½½ï¼Ÿ ç­”:ç‚¹å‡»ä¸‹è½½æŒ‰é’®æˆ–é•¿æŒ‰å›¾ç‰‡ä¿å­˜<br><br>2.æˆ‘çš„å›¾ç‰‡åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ï¼Ÿ ç­”:çœ‹ä½ æµè§ˆå™¨äº†ï¼Œä¸€èˆ¬éƒ½æ˜¯â€œDownloadâ€â€œPicturesâ€æ–‡ä»¶å¤¹<br><br>3.æˆ‘çš„æ•°æ®ä¼šä¿å­˜å—ï¼Ÿ ç­”:æ•°æ®éƒ½æ˜¯å­˜åœ¨æµè§ˆå™¨æœ¬åœ°çš„ï¼Œæ¸…ç†æµè§ˆå™¨æ•°æ®æˆ–å¸è½½éƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæˆ‘ä»¬ä»¥åä¼šåŠ å…¥æ•°æ®å¯¼å‡ºå¯¼å…¥çš„<br><br>4.ä¸ºä»€ä¹ˆæˆ‘è®¾ç½®å¤šåˆ—å¸ƒå±€ç»“æ„è¿˜æ˜¯å•åˆ—ï¼Ÿ ç­”:ä½ éœ€è¦ä¸€ä¸ªåˆé€‚å¤§å°çš„å±å¹•æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œæ‰‹æœºå¯ä»¥è¯•è¯•æ¨ªå±</p>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-color-theme mdui-ripple" mdui-dialog-close>å…³é—­</button>
        </div>
    </div>

    <!-- å›¾ç‰‡è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="image-modal">
        <div class="mdui-dialog-title" id="modal-title">å›¾ç‰‡æ ‡é¢˜</div>
        <div class="mdui-dialog-content">
            <div class="modal-image-container" id="modal-image-container">
                <!-- å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
            <div class="modal-image-info">
                <p id="modal-description">å›¾ç‰‡æè¿°ä¿¡æ¯</p>
                <div class="mdui-divider"></div>
                <div class="mdui-row mdui-m-t-2">
                    <div class="mdui-col-xs-6">
                        <i class="fas fa-calendar-alt"></i> ä¸Šä¼ æ—¶é—´: <span id="modal-date">2023-10-01</span>
                    </div>
                    <div class="mdui-col-xs-6">
                        <i class="fas fa-tag"></i> åˆ†ç±»: <span id="modal-category">è‡ªç„¶</span>
                    </div>
                </div>
                <div class="image-tags mdui-m-t-2" id="modal-tags"></div>
            </div>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-ripple" mdui-dialog-close>å…³é—­</button>
            <button class="mdui-btn mdui-ripple" id="download-btn">
                <i class="fas fa-download"></i> ä¸‹è½½
            </button>
            <button class="mdui-btn mdui-color-theme mdui-ripple" id="modal-favorite-btn">
                <i class="far fa-heart"></i> <span id="favorite-text">æ”¶è—</span>
            </button>
        </div>
    </div>

    <!-- ç»Ÿè®¡ä¿¡æ¯æ¨¡æ€æ¡† -->
    <div class="mdui-dialog" id="stats-dialog">
        <div class="mdui-dialog-title">å›¾åº“ç»Ÿè®¡</div>
        <div class="mdui-dialog-content stats-dialog-content">
            <div class="mdui-typo">
                <div class="mdui-row">
                    <div class="mdui-col-xs-6 mdui-text-center mdui-p-y-3">
                        <div class="stats-icon">
                            <i class="mdui-icon material-icons mdui-text-color-theme">photo_library</i>
                        </div>
                        <div class="stats-value" id="total-count">0</div>
                        <div class="stats-label">æ€»å›¾ç‰‡æ•°</div>
                    </div>
                    <div class="mdui-col-xs-6 mdui-text-center mdui-p-y-3">
                        <div class="stats-icon">
                            <i class="mdui-icon material-icons mdui-text-color-theme">favorite</i>
                        </div>
                        <div class="stats-value" id="favorite-stats-count">0</div>
                        <div class="stats-label">æ”¶è—æ•°</div>
                    </div>
                </div>
                
                <div class="mdui-divider"></div>
                
                <h4 class="mdui-m-t-3"><i class="mdui-icon material-icons">category</i> åˆ†ç±»åˆ†å¸ƒ</h4>
                <div id="category-stats">
                    <!-- åˆ†ç±»ç»Ÿè®¡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="mdui-m-t-3">
                    <p class="mdui-text-color-theme-secondary"><i class="mdui-icon material-icons">update</i> æ•°æ®æœ€åæ›´æ–°: <span id="last-update">åˆšåˆš</span></p>
                </div>
            </div>
        </div>
        <div class="mdui-dialog-actions">
            <button class="mdui-btn mdui-color-theme mdui-ripple" mdui-dialog-close>å…³é—­</button>
        </div>
    </div>

    <!-- MDUI 1.0.2 JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/mdui@1.0.2/dist/js/mdui.min.js"></script>
    <script>
        // å›¾ç‰‡æ•°æ®
        const imageData = [
        { 
                id: -1, 
                title: "å¤´åƒ", 
                description: "æ— ", 
                category: "äºŒæ¬¡å…ƒ", 
                tags: ["åŠ¨æ¼«","å¤´åƒ"],
                date: "2026-02-08", 
                src: "img/å¤´åƒ-1.png" 
            },
            { 
                id: 0, 
                title: "åˆ†å‰²çº¿", 
                description: "è¿™æ˜¯åˆ†å‰²çº¿ï¼Œä¸‹é¢æ˜¯AIæ‰¾çš„å›¾", 
                category: "all", 
                tags: ["æ— "],
                date: "2026-02-08", 
                src: "ä¾§è¾¹æ é¡¶éƒ¨å›¾.jpeg" 
            },
            { 
                id: 1, 
                title: "å±±é—´æ¹–æ³Š", 
                description: "å®é™çš„å±±é—´æ¹–æ³Šï¼Œå€’æ˜ ç€å‘¨å›´çš„å±±å³°å’Œè“å¤©ç™½äº‘ï¼Œæ™¯è‰²å¦‚ç”»ã€‚", 
                category: "é£æ™¯", 
                tags: ["è‡ªç„¶", "æ¹–æ³Š", "å±±æ™¯"],
                date: "2026-02-08", 
                src: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 2, 
                title: "åŸå¸‚å¤œæ™¯", 
                description: "ç¹åéƒ½å¸‚çš„å¤œæ™šï¼Œç¯ç«è¾‰ç…Œï¼Œå±•ç°ç°ä»£éƒ½å¸‚çš„ç‹¬ç‰¹é­…åŠ›ã€‚", 
                category: "é£æ™¯", 
                tags: ["åŸå¸‚", "å¤œæ™¯", "å»ºç­‘"],
                date: "2026-02-08", 
                src: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 3, 
                title: "å¯çˆ±çŒ«å’ª", 
                description: "ä¸€åªå¯çˆ±çš„å°çŒ«å’ªï¼Œçç€å¤§å¤§çš„çœ¼ç›ï¼Œå¥½å¥‡åœ°è§‚å¯Ÿç€ä¸–ç•Œã€‚", 
                category: "å…¶ä»–", 
                tags: ["åŠ¨ç‰©", "çŒ«å’ª", "å® ç‰©"],
                date: "2026-02-08", 
                src: "https://images.unsplash.com/photo-1514888286974-6d03bde4ba48?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 4, 
                title: "ç²¾è‡´ç”œç‚¹", 
                description: "è‰²å½©ç¼¤çº·çš„ç²¾è‡´ç”œç‚¹ï¼Œè®©äººå‚æ¶æ¬²æ»´ï¼Œæ˜¯è§†è§‰ä¸å‘³è§‰çš„åŒé‡äº«å—ã€‚", 
                category: "å…¶ä»–", 
                tags: ["ç¾é£Ÿ", "ç”œç‚¹", "çƒ˜ç„™"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1565958011703-44f9829ba187?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 5, 
                title: "æµ·æ»©æ—¥è½", 
                description: "é‡‘è‰²é˜³å…‰æ´’åœ¨æµ·é¢ä¸Šï¼Œå½¢æˆä¸€é“ç¾ä¸½çš„å…‰è·¯ï¼Œæ—¥è½æ—¶åˆ†çš„æµ·æ»©æ ¼å¤–å®é™ã€‚", 
                category: "é£æ™¯", 
                tags: ["æ—…è¡Œ", "æµ·æ»©", "æ—¥è½"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 6, 
                title: "æ£®æ—å°å¾„", 
                description: "æ¸…æ™¨çš„æ£®æ—å°å¾„ï¼Œé˜³å…‰é€è¿‡æ ‘å¶æ´’ä¸‹æ–‘é©³å…‰å½±ï¼Œå……æ»¡ç¥ç§˜ä¸å®é™ã€‚", 
                category: "é£æ™¯", 
                tags: ["è‡ªç„¶", "æ£®æ—", "å°å¾„"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1448375240586-882707db888b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 7, 
                title: "ç°ä»£å»ºç­‘", 
                description: "æå…·è®¾è®¡æ„Ÿçš„ç°ä»£å»ºç­‘ï¼Œå‡ ä½•çº¿æ¡ä¸å…‰å½±çš„å®Œç¾ç»“åˆã€‚", 
                category: "é£æ™¯", 
                tags: ["åŸå¸‚", "å»ºç­‘", "ç°ä»£"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1487956382158-bb926046304a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 8, 
                title: "è‰åŸéªé©¬", 
                description: "è‡ªç”±å¥”é©°åœ¨è‰åŸä¸Šçš„éªé©¬ï¼Œå±•ç°äº†åŠ›é‡ä¸è‡ªç”±çš„å®Œç¾ç»“åˆã€‚", 
                category: "å…¶ä»–", 
                tags: ["åŠ¨ç‰©", "é©¬", "è‰åŸ"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1550358864-518f202c02ba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 9, 
                title: "å¼‚å›½æ–™ç†", 
                description: "æ‘†ç›˜ç²¾ç¾çš„å¼‚å›½æ–™ç†ï¼Œè‰²å½©ä¸°å¯Œï¼Œå±•ç°äº†ä¸åŒæ–‡åŒ–çš„çƒ¹é¥ªè‰ºæœ¯ã€‚", 
                category: "å…¶ä»–", 
                tags: ["ç¾é£Ÿ", "æ–™ç†", "å¼‚å›½"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1555939594-58d7cb561ad1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&qw&q=80" 
            },
            { 
                id: 10, 
                title: "é›ªå±±ä¹‹å·…", 
                description: "é›„ä¼Ÿçš„é›ªå±±ä¹‹å·…ï¼Œåœ¨è“å¤©çš„æ˜ è¡¬ä¸‹æ›´æ˜¾å£®ä¸½ä¸åœ£æ´ã€‚", 
                category: "é£æ™¯", 
                tags: ["æ—…è¡Œ", "é›ªå±±", "ç™»å±±"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1464278533981-50106e6176b1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 11, 
                title: "ç§‹æ—¥è½å¶", 
                description: "é‡‘é»„è‰²çš„ç§‹æ—¥è½å¶é“ºæ»¡å°å¾„ï¼Œæ˜¯å­£èŠ‚æ›´è¿­çš„ç¾ä¸½å°è®°ã€‚", 
                category: "é£æ™¯", 
                tags: ["è‡ªç„¶", "ç§‹å¤©", "è½å¶"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1503454537195-1dcabb73ffb9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            },
            { 
                id: 12, 
                title: "è¡—å¤´è‰ºæœ¯", 
                description: "å……æ»¡åˆ›æ„ä¸ä¸ªæ€§çš„è¡—å¤´æ¶‚é¸¦è‰ºæœ¯ï¼Œä¸ºåŸå¸‚å¢æ·»äº†è‰²å½©ä¸æ´»åŠ›ã€‚", 
                category: "é£æ™¯", 
                tags: ["åŸå¸‚", "è‰ºæœ¯", "è¡—å¤´"],
                date: "2026-02-08",
                src: "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" 
            }
        ];

        // åˆ†ç±»æ•°æ® - ä½¿ç”¨Emojiå›¾æ ‡
        const categories = [
            { id: "all", name: "å…¨éƒ¨", icon: "ğŸ“" },
            { id: "é£æ™¯", name: "é£æ™¯", icon: "ğŸŒ³" },
            { id: "å…¶ä»–", name: "å…¶ä»–", icon: "ğŸ‘¾" },
            { id: "äºŒæ¬¡å…ƒ", name: "äºŒæ¬¡å…ƒ", icon: "ğŸ’ƒğŸ»" },
            { id: "äººç‰©", name: "äººç‰©", icon: "ğŸ§ğŸ»â€â™€ï¸" },
            { id: "ç«™é•¿", name: "ç«™é•¿", icon: "ğŸ¤“" }
        ];

        // åº”ç”¨çŠ¶æ€
        let appState = {
            searchTerm: '',
            currentCategory: 'all',
            favorites: [],
            layout: 'multi',
            themeColor: 'blue',
            themeMode: 'auto',
            currentImage: null
        };

        // DOMå…ƒç´ 
        const imageGrid = document.getElementById('image-grid');
        const mainSearch = document.getElementById('main-search');
        const searchButton = document.getElementById('search-button');
        const clearSearch = document.getElementById('clear-search');
        const searchStatus = document.getElementById('search-status');
        const totalImagesSpan = document.getElementById('total-images');
        const categoryFilterBtn = document.getElementById('category-filter-btn');
        const categoryList = document.getElementById('category-list');
        const clearCategoryBtn = document.getElementById('clear-category');
        const uploadBtn = document.getElementById('upload-btn');
        const favoritesBtn = document.getElementById('favorites-btn');
        const favoriteCount = document.getElementById('favorite-count');
        const settingsBtn = document.getElementById('settings-btn');
        const saveSettingsBtn = document.getElementById('save-settings');
        const resetSettingsBtn = document.getElementById('reset-settings');
        const aboutBtn = document.getElementById('about-btn');
        const refreshGalleryBtn = document.getElementById('refresh-gallery');
        const refreshPageBtn = document.getElementById('refresh-page');
        const viewStatsBtn = document.getElementById('view-stats');
        const downloadBtn = document.getElementById('download-btn');
        const modalFavoriteBtn = document.getElementById('modal-favorite-btn');
        const favoriteText = document.getElementById('favorite-text');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        const modalDate = document.getElementById('modal-date');
        const modalCategory = document.getElementById('modal-category');
        const modalTags = document.getElementById('modal-tags');
        const modalImageContainer = document.getElementById('modal-image-container');

        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            loadStateFromStorage();
            renderCategories();
            renderImages();
            updateFavoriteCount();
            applySettings();
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            setupEventListeners();
            
            // æ›´æ–°å›¾ç‰‡æ€»æ•°
            updateImageCount();
        }

        // åŠ è½½çŠ¶æ€ä»æœ¬åœ°å­˜å‚¨
        function loadStateFromStorage() {
            const savedState = localStorage.getItem('mduiGalleryState');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                appState.favorites = parsed.favorites || [];
                appState.layout = parsed.layout || 'multi';
                appState.themeColor = parsed.themeColor || 'blue';
                appState.themeMode = parsed.themeMode || 'auto';
            }
        }

        // ä¿å­˜çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
        function saveStateToStorage() {
            localStorage.setItem('mduiGalleryState', JSON.stringify({
                favorites: appState.favorites,
                layout: appState.layout,
                themeColor: appState.themeColor,
                themeMode: appState.themeMode
            }));
        }

        // æ¸²æŸ“åˆ†ç±»åˆ—è¡¨
        function renderCategories() {
            categoryList.innerHTML = '';
            
            categories.forEach(category => {
                const item = document.createElement('div');
                item.className = 'mdui-list-item mdui-ripple';
                item.dataset.category = category.id;
                
                item.innerHTML = `
                    <i class="mdui-list-item-icon">${category.icon}</i>
                    <div class="mdui-list-item-content">${category.name}</div>
                    ${appState.currentCategory === category.id ? 
                      '<i class="mdui-list-item-icon mdui-icon material-icons">check</i>' : ''}
                `;
                
                item.addEventListener('click', () => {
                    appState.currentCategory = category.id;
                    renderImages();
                    renderCategories();
                });
                
                categoryList.appendChild(item);
            });
        }

        // æ¸²æŸ“å›¾ç‰‡ç½‘æ ¼
        function renderImages() {
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            document.getElementById('loader').style.display = 'block';
            document.getElementById('empty-state').style.display = 'none';
            imageGrid.innerHTML = '';
            
            // ç­›é€‰å›¾ç‰‡
            let filteredImages = imageData.filter(img => {
                // åˆ†ç±»ç­›é€‰
                if (appState.currentCategory !== 'all' && img.category !== appState.currentCategory) {
                    return false;
                }
                
                // æœç´¢ç­›é€‰
                if (appState.searchTerm) {
                    const searchLower = appState.searchTerm.toLowerCase();
                    const inTitle = img.title.toLowerCase().includes(searchLower);
                    const inDescription = img.description.toLowerCase().includes(searchLower);
                    const inTags = img.tags.some(tag => tag.toLowerCase().includes(searchLower));
                    
                    return inTitle || inDescription || inTags;
                }
                
                return true;
            });
            
            // éšè—åŠ è½½åŠ¨ç”»
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡
                if (filteredImages.length === 0) {
                    document.getElementById('empty-state').style.display = 'block';
                    return;
                }
                
                // æ¸²æŸ“å›¾ç‰‡
                filteredImages.forEach((image, index) => {
                    const isFavorite = appState.favorites.includes(image.id);
                    
                    const card = document.createElement('div');
                    card.className = 'image-card fade-in';
                    card.style.animationDelay = `${index * 0.05}s`;
                    
                    const categoryName = categories.find(cat => cat.id === image.category)?.name || image.category;
                    
                    card.innerHTML = `
                        <div class="image-container">
                            <img src="${image.src}" alt="${image.title}" loading="lazy">
                            <div class="image-actions">
                                <button class="mdui-btn mdui-btn-icon mdui-ripple mdui-color-white favorite-btn" data-id="${image.id}">
                                    <i class="fas ${isFavorite ? 'fa-heart' : 'fa-heart'} ${isFavorite ? 'mdui-text-color-red' : ''}"></i>
                                </button>
                            </div>
                        </div>
                        <div class="image-caption">
                            <h3>${image.title}</h3>
                            <p>${image.description}</p>
                            <div class="image-tags">
                                <span class="image-tag">${categoryName}</span>
                                ${image.tags.map(tag => `<span class="image-tag">${tag}</span>`).join('')}
                            </div>
                        </div>
                    `;
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶æ‰“å¼€æ¨¡æ€æ¡†
                    card.addEventListener('click', (e) => {
                        if (!e.target.closest('.favorite-btn')) {
                            openImageModal(image);
                        }
                    });
                    
                    // æ·»åŠ æ”¶è—æŒ‰é’®äº‹ä»¶
                    const favoriteBtn = card.querySelector('.favorite-btn');
                    favoriteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleFavorite(image.id);
                        renderImages();
                    });
                    
                    imageGrid.appendChild(card);
                });
                
                // æ›´æ–°å¸ƒå±€
                applyLayout();
                
            }, 500);
            
            // æ›´æ–°æœç´¢çŠ¶æ€
            updateImageCount();
        }

        // æ‰“å¼€å›¾ç‰‡æ¨¡æ€æ¡†
        function openImageModal(image) {
            appState.currentImage = image;
            const isFavorite = appState.favorites.includes(image.id);
            const categoryName = categories.find(cat => cat.id === image.category)?.name || image.category;
            
            // æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
            modalTitle.textContent = image.title;
            modalDescription.textContent = image.description;
            modalDate.textContent = image.date;
            modalCategory.textContent = categoryName;
            
            // æ¸…é™¤ä¹‹å‰çš„å›¾ç‰‡
            modalImageContainer.innerHTML = '';
            
            // æ·»åŠ æ–°å›¾ç‰‡
            const img = document.createElement('img');
            img.src = image.src;
            img.alt = image.title;
            modalImageContainer.appendChild(img);
            
            // æ›´æ–°æ ‡ç­¾
            modalTags.innerHTML = '';
            image.tags.forEach(tag => {
                const tagSpan = document.createElement('span');
                tagSpan.className = 'image-tag';
                tagSpan.textContent = tag;
                modalTags.appendChild(tagSpan);
            });
            
            // æ›´æ–°æ”¶è—æŒ‰é’®
            const favoriteIcon = modalFavoriteBtn.querySelector('i');
            favoriteIcon.className = isFavorite ? 'fas fa-heart' : 'far fa-heart';
            favoriteText.textContent = isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—';
            
            // æ‰“å¼€æ¨¡æ€æ¡†
            const modal = new mdui.Dialog('#image-modal');
            modal.open();
        }

        // åˆ‡æ¢æ”¶è—çŠ¶æ€
        function toggleFavorite(imageId) {
            const index = appState.favorites.indexOf(imageId);
            
            if (index > -1) {
                appState.favorites.splice(index, 1);
            } else {
                appState.favorites.push(imageId);
            }
            
            saveStateToStorage();
            updateFavoriteCount();
            
            // æ˜¾ç¤ºæç¤º
            const isNowFavorite = appState.favorites.includes(imageId);
            mdui.snackbar({
                message: isNowFavorite ? 'å·²æ·»åŠ åˆ°æ”¶è—' : 'å·²å–æ¶ˆæ”¶è—',
                position: 'bottom'
            });
        }

        // æ›´æ–°æ”¶è—æ•°é‡
        function updateFavoriteCount() {
            favoriteCount.textContent = appState.favorites.length;
        }

        // æ›´æ–°å›¾ç‰‡è®¡æ•°
        function updateImageCount() {
            const filteredCount = imageData.filter(img => {
                if (appState.currentCategory !== 'all' && img.category !== appState.currentCategory) {
                    return false;
                }
                
                if (appState.searchTerm) {
                    const searchLower = appState.searchTerm.toLowerCase();
                    const inTitle = img.title.toLowerCase().includes(searchLower);
                    const inDescription = img.description.toLowerCase().includes(searchLower);
                    const inTags = img.tags.some(tag => tag.toLowerCase().includes(searchLower));
                    
                    return inTitle || inDescription || inTags;
                }
                
                return true;
            }).length;
            
            totalImagesSpan.textContent = filteredCount;
            searchStatus.textContent = `å…± ${filteredCount} å¼ å›¾ç‰‡`;
        }

        // åº”ç”¨å¸ƒå±€è®¾ç½®
        function applyLayout() {
            if (appState.layout === 'single') {
                imageGrid.classList.add('single-column');
            } else {
                imageGrid.classList.remove('single-column');
            }
        }

        // åº”ç”¨è®¾ç½®
        function applySettings() {
            // åº”ç”¨ä¸»é¢˜é¢œè‰²
            document.body.classList.remove('mdui-theme-primary-blue', 'mdui-theme-primary-red', 
                                          'mdui-theme-primary-green', 'mdui-theme-primary-purple',
                                          'mdui-theme-primary-orange', 'mdui-theme-primary-indigo');
            document.body.classList.add(`mdui-theme-primary-${appState.themeColor}`);
            
            // åº”ç”¨ä¸»é¢˜æ¨¡å¼
            if (appState.themeMode === 'light') {
                document.documentElement.classList.remove('mdui-theme-auto');
                document.documentElement.classList.remove('mdui-theme-dark');
            } else if (appState.themeMode === 'dark') {
                document.documentElement.classList.remove('mdui-theme-auto');
                document.documentElement.classList.add('mdui-theme-dark');
            } else {
                document.documentElement.classList.add('mdui-theme-auto');
                document.documentElement.classList.remove('mdui-theme-dark');
            }
            
            // åº”ç”¨å¸ƒå±€
            applyLayout();
            
            // æ›´æ–°è®¾ç½®å¯¹è¯æ¡†ä¸­çš„é€‰æ‹©çŠ¶æ€
            updateSettingsDialog();
        }

        // æ›´æ–°è®¾ç½®å¯¹è¯æ¡†ä¸­çš„é€‰æ‹©çŠ¶æ€
        function updateSettingsDialog() {
            // ä¸»é¢˜é¢œè‰²
            document.querySelectorAll('.theme-color-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.color === appState.themeColor) {
                    option.classList.add('selected');
                }
            });
            
            // å¸ƒå±€
            document.querySelectorAll('input[name="layout"]').forEach(radio => {
                radio.checked = radio.value === appState.layout;
            });
            
            // ä¸»é¢˜æ¨¡å¼
            document.querySelectorAll('input[name="theme"]').forEach(radio => {
                radio.checked = radio.value === appState.themeMode;
            });
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æœç´¢ç›¸å…³
            mainSearch.addEventListener('input', (e) => {
                appState.searchTerm = e.target.value;
                renderImages();
            });
            
            searchButton.addEventListener('click', () => {
                renderImages();
            });
            
            clearSearch.addEventListener('click', () => {
                appState.searchTerm = '';
                mainSearch.value = '';
                renderImages();
            });
            
            // åˆ†ç±»ç­›é€‰
            categoryFilterBtn.addEventListener('click', () => {
                const dialog = new mdui.Dialog('#category-dialog');
                dialog.open();
            });
            
            clearCategoryBtn.addEventListener('click', () => {
                appState.currentCategory = 'all';
                renderImages();
                renderCategories();
            });
            
            // ä¸Šä¼ å›¾ç‰‡
            uploadBtn.addEventListener('click', () => {
                const dialog = new mdui.Dialog('#upload-dialog');
                dialog.open();
            });
            
            // æˆ‘çš„æ”¶è—
            favoritesBtn.addEventListener('click', () => {
                renderFavoritesDialog();
                const dialog = new mdui.Dialog('#favorites-dialog');
                dialog.open();
            });
            
            // è®¾ç½®
            settingsBtn.addEventListener('click', () => {
                updateSettingsDialog();
                const dialog = new mdui.Dialog('#settings-dialog');
                dialog.open();
            });
            
            // ä¿å­˜è®¾ç½®æŒ‰é’® - ä¿®å¤bugï¼šæ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            saveSettingsBtn.addEventListener('click', () => {
                saveSettings();
            });
            
            // é‡ç½®è®¾ç½®æŒ‰é’®
            resetSettingsBtn.addEventListener('click', () => {
                resetSettings();
            });
            
            // å…³äº
            aboutBtn.addEventListener('click', () => {
                const dialog = new mdui.Dialog('#about-dialog');
                dialog.open();
            });
            
            // åˆ·æ–°å›¾åº“
            refreshGalleryBtn.addEventListener('click', () => {
                renderImages();
                mdui.snackbar({
                    message: 'å›¾åº“å·²åˆ·æ–°',
                    position: 'bottom'
                });
            });
            
            // åˆ·æ–°é¡µé¢
            refreshPageBtn.addEventListener('click', () => {
                window.location.reload();
            });
            
            // æŸ¥çœ‹ç»Ÿè®¡
            viewStatsBtn.addEventListener('click', () => {
                renderStatsDialog();
                const dialog = new mdui.Dialog('#stats-dialog');
                dialog.open();
            });
            
            // ä¸‹è½½æŒ‰é’®
            downloadBtn.addEventListener('click', () => {
                if (appState.currentImage) {
                    const link = document.createElement('a');
                    link.href = appState.currentImage.src;
                    link.download = appState.currentImage.title + '.jpg';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    mdui.snackbar({
                        message: 'å›¾ç‰‡ä¸‹è½½ä¸­...',
                        position: 'bottom'
                    });
                }
            });
            
            // æ¨¡æ€æ¡†æ”¶è—æŒ‰é’®
            modalFavoriteBtn.addEventListener('click', () => {
                if (appState.currentImage) {
                    toggleFavorite(appState.currentImage.id);
                    
                    // æ›´æ–°æ¨¡æ€æ¡†ä¸­çš„æ”¶è—æŒ‰é’®çŠ¶æ€
                    const isFavorite = appState.favorites.includes(appState.currentImage.id);
                    const favoriteIcon = modalFavoriteBtn.querySelector('i');
                    favoriteIcon.className = isFavorite ? 'fas fa-heart' : 'far fa-heart';
                    favoriteText.textContent = isFavorite ? 'å·²æ”¶è—' : 'æ”¶è—';
                    
                    // æ›´æ–°ç½‘æ ¼ä¸­çš„æ”¶è—çŠ¶æ€
                    renderImages();
                }
            });
            
            // ä¸»é¢˜é¢œè‰²é€‰æ‹©
            document.querySelectorAll('.theme-color-option').forEach(option => {
                option.addEventListener('click', () => {
                    appState.themeColor = option.dataset.color;
                    applySettings();
                    updateSettingsDialog();
                });
            });
            
            // å¸ƒå±€é€‰æ‹©
            document.querySelectorAll('input[name="layout"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    appState.layout = radio.value;
                    applySettings();
                });
            });
            
            // ä¸»é¢˜æ¨¡å¼é€‰æ‹©
            document.querySelectorAll('input[name="theme"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    appState.themeMode = radio.value;
                    applySettings();
                });
            });
        }

        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            // ä»å¯¹è¯æ¡†è·å–å½“å‰é€‰æ‹©çš„å€¼
            const selectedLayout = document.querySelector('input[name="layout"]:checked').value;
            const selectedTheme = document.querySelector('input[name="theme"]:checked').value;
            
            // æ›´æ–°åº”ç”¨çŠ¶æ€
            appState.layout = selectedLayout;
            appState.themeMode = selectedTheme;
            
            // åº”ç”¨è®¾ç½®
            applySettings();
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveStateToStorage();
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸçš„æç¤º
            mdui.snackbar({
                message: 'è®¾ç½®å·²ä¿å­˜',
                position: 'bottom'
            });
            
            // å…³é—­å¯¹è¯æ¡†
            const dialog = new mdui.Dialog('#settings-dialog');
            dialog.close();
        }

        // é‡ç½®è®¾ç½®
        function resetSettings() {
            appState.layout = 'multi';
            appState.themeColor = 'blue';
            appState.themeMode = 'auto';
            
            applySettings();
            updateSettingsDialog();
            saveStateToStorage();
            
            mdui.snackbar({
                message: 'è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼',
                position: 'bottom'
            });
        }

        // æ¸²æŸ“æ”¶è—å¯¹è¯æ¡†
        function renderFavoritesDialog() {
            const favoritesGrid = document.getElementById('favorites-grid');
            const favoritesEmpty = document.getElementById('favorites-empty');
            
            favoritesGrid.innerHTML = '';
            
            if (appState.favorites.length === 0) {
                favoritesEmpty.style.display = 'block';
                return;
            }
            
            favoritesEmpty.style.display = 'none';
            
            appState.favorites.forEach(favId => {
                const image = imageData.find(img => img.id === favId);
                if (!image) return;
                
                const item = document.createElement('div');
                item.className = 'favorite-item';
                
               // item.innerHTML = `
               //    <img src="${image.src}" alt="${image.title}">
               //     <div class="favorite-remove" data-id="${image.id}">
               //         <i class="fas fa-times"></i>
               //     </div>
               // `;
                
                item.innerHTML = `
    <button class="favorite-image-button" mdui-dialog-close style="all: unset; width: 100%; height: 100%; cursor: pointer; display: block;">
        <img src="${image.src}" alt="${image.title}" style="width: 100%; height: 100%; object-fit: cover;">
    </button>
    <div class="favorite-remove" data-id="${image.id}">
        <i class="fas fa-times"></i>
    </div>
`;
                // ç‚¹å‡»æŸ¥çœ‹å¤§å›¾
                item.addEventListener('click', (e) => {
                    if (!e.target.closest('.favorite-remove')) {
                        openImageModal(image);
                    }
                });
                
                // ç§»é™¤æ”¶è—
                const removeBtn = item.querySelector('.favorite-remove');
                removeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(image.id);
                    renderFavoritesDialog();
                });
                
                favoritesGrid.appendChild(item);
            });
        }

        // æ¸²æŸ“ç»Ÿè®¡å¯¹è¯æ¡†
        function renderStatsDialog() {
            // æ›´æ–°æ€»å›¾ç‰‡æ•°
            document.getElementById('total-count').textContent = imageData.length;
            
            // æ›´æ–°æ”¶è—æ•°
            document.getElementById('favorite-stats-count').textContent = appState.favorites.length;
            
            // æ›´æ–°åˆ†ç±»åˆ†å¸ƒ
            const categoryStats = document.getElementById('category-stats');
            categoryStats.innerHTML = '';
            
            const categoryCounts = {};
            categories.forEach(cat => {
                if (cat.id !== 'all') {
                    categoryCounts[cat.id] = 0;
                }
            });
            
            imageData.forEach(img => {
                if (categoryCounts[img.category] !== undefined) {
                    categoryCounts[img.category]++;
                }
            });
            
            categories.forEach(cat => {
                if (cat.id !== 'all') {
                    const count = categoryCounts[cat.id] || 0;
                    const percentage = (count / imageData.length * 100).toFixed(1);
                    
                    const statItem = document.createElement('div');
                    statItem.className = 'mdui-row mdui-m-b-2';
                    
                    statItem.innerHTML = `
                        <div class="mdui-col-xs-3">
                            <strong>${cat.icon} ${cat.name}</strong>
                        </div>
                        <div class="mdui-col-xs-6">
                            <div class="mdui-progress">
                                <div class="mdui-progress-determinate" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <div class="mdui-col-xs-3 mdui-text-right">
                            ${count}å¼  (${percentage}%)
                        </div>
                    `;
                    
                    categoryStats.appendChild(statItem);
                }
            });
            
            // æ›´æ–°æœ€åæ›´æ–°æ—¶é—´
            document.getElementById('last-update').textContent = new Date().toLocaleString('zh-CN');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
